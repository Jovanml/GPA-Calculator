<!DOCTYPE html>
<html>
    <head>
        <title>GPA Calculator</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="top-bar">
            <h1>GPA Calculator</h1>
        </div>
        <h2 class="courses-header">Courses</h2>
        <div class="container">
            <div id="input" class="input-box"></div>
            <div class = buttons>
                <button onclick="addCell()" class="add-btn" id="btn">Add</button>
                <button onclick="calculate()" class="cal-btn" id="cal">Calculate</button>
                <button onclick="delCell()" class="del-btn" id="btn2">Delete</button>
            </div>
            <h1 class="gpa-text">Your GPA is </h1>
            <p id= "write" class="output-box"></p>
        </div>

        <script> 
            var counter = 0;
            var limit = 8;

            function addCell(){
                if(counter <= limit){
                    var inputBox = document.createElement('input');
                    var div = document.createElement('div');
                    inputBox.type = "number";
                    inputBox.classList = "newInputBox";
                    div.appendChild(inputBox);
                    document.getElementById("input").appendChild(div);
                    counter += 1;
                }
            }

            function delCell(){
                container = document.getElementById("input");
                container.removeChild(container.lastElementChild);
                counter -=1;
            }

            function calculate(){
                var elements = document.getElementsByClassName('newInputBox');
                var sum = 0;
                for(var i = 0;i<elements.length;i++){
                    if(elements[i].value.length == 0){
                        document.getElementById("write").innerHTML = "Invalid Input";
                        document.getElementById("write").style.color = "red";
                        return;
                    }
                    sum = sum + parseFloat(elements[i].value);
                }
                avg = parseFloat(sum/elements.length).toFixed(2);
                document.getElementById("write").innerHTML = avg;
                document.getElementById("write").style.color = "black";
            }
                
            document.addEventListener("keyup", function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    document.getElementById("cal").click();
                }
            });
            
            for(var i = 0;i<5;i++){
                addCell();
            }    
        </script>
    </body>
</html>